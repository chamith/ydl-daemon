(this["webpackJsonpyoutube-dl-webui"]=this["webpackJsonpyoutube-dl-webui"]||[]).push([[0],{108:function(e,t,a){e.exports=a(134)},134:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),c=a.n(r),o=a(12),u=a(38),i=a.n(u);var m=a(186),s=a(176),d=a(172),E=a(60),p=a.n(E),f=a(171),b=a(170),g=a(91),h=a.n(g),v=a(90),y=a.n(v),C=a(53),O=a.n(C),j=a(55),w=a.n(j),D=a(56),k=a.n(D),x=a(57),S=a.n(x),q=a(88),B=a.n(q),F=a(59),I=a.n(F),A=a(189),N=a(165),z=a(166),R=a(167),T=a(168),G=a(169);function J(e){return l.a.createElement(A.a,{open:e.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(N.a,{id:"alert-dialog-title"},"Confirm Deletion"),l.a.createElement(z.a,null,l.a.createElement(R.a,{id:"alert-dialog-description"},"Are you sure to delete the item ",l.a.createElement("b",null,"'",e.item.title,"'"))),l.a.createElement(T.a,null,l.a.createElement(G.a,{onClick:function(){return e.onDelete(e.item.id)},color:"primary",variant:"contained",autoFocus:!0}," Yes "),l.a.createElement(G.a,{onClick:function(){return e.onCancel()},color:"secondary",variant:"contained"},"No")))}function L(e){var t=e.item,a=t.id,r=t.title,c=t.status,u=t.progress,i=Object(n.useState)(!1),m=Object(o.a)(i,2),s=m[0],E=m[1],g=function(){switch(c){case 0:return l.a.createElement(O.a,null);case 1:return l.a.createElement(w.a,null);case 2:return l.a.createElement(B.a,null);case 3:return l.a.createElement(k.a,null);default:return l.a.createElement(S.a,null)}},h=function(){return c>0&&c<3?" [".concat(u.toFixed(2),"%]"):""};return l.a.createElement(b.a,{key:a},l.a.createElement(f.a,{style:{padding:"6px",width:"30px"}},l.a.createElement(g,null)),l.a.createElement(f.a,{style:{padding:"6px",width:"30px"}},l.a.createElement(I.a,null)),l.a.createElement(f.a,{style:{padding:"6px"}}," ",l.a.createElement(h,null)," ",r),l.a.createElement(f.a,{align:"right"},l.a.createElement(d.a,{onClick:function(e){return E(!0)},color:"secondary"},l.a.createElement(p.a,null))),l.a.createElement(J,{open:s,item:e.item,onDelete:e.onDelete,onCancel:function(){return E(!1)}}))}var M=a(173),U=a(174);function Y(e){return l.a.createElement(M.a,{size:"small","aria-label":"purchases",style:{margin:"0px 0px 0px 75px",width:"95%"}},l.a.createElement(U.a,null,e.items.map((function(t){return l.a.createElement(L,{key:t.id,item:t,onDelete:e.onItemDelete})}))))}var Z=a(175),_=a(89),P=a.n(_);function Q(e){return l.a.createElement(A.a,{open:e.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(N.a,{id:"alert-dialog-title"},"Confirm Deletion"),l.a.createElement(z.a,null,l.a.createElement(R.a,{id:"alert-dialog-description"},"Are you sure to delete the request ",l.a.createElement("b",null,"'",e.request.url,"'"))),l.a.createElement(T.a,null,l.a.createElement(G.a,{onClick:function(){return e.onDelete(e.request.id)},color:"primary",variant:"contained",autoFocus:!0}," Yes "),l.a.createElement(G.a,{onClick:function(){return e.onCancel()},color:"secondary",variant:"contained"},"No")))}var W=Object(Z.a)({root:{"& > *":{padding:"5px"}}});function H(e){var t=e.request,a=t.url,r=t.status,c=t.progress,u=t.items,i=t.title,E=t.type,g=t.uploader,v=Object(n.useState)(!1),C=Object(o.a)(v,2),j=C[0],D=C[1],x=Object(n.useState)(!1),q=Object(o.a)(x,2),B=q[0],F=q[1],A=W(),N=function(){return r>0&&r<3?" [".concat(c.toFixed(2),"%]"):""},z=function(){return null==i?a:"".concat(i," [").concat(g,"]")},R=function(){return"video"===E?l.a.createElement(b.a,null):l.a.createElement(b.a,null,l.a.createElement(f.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},l.a.createElement(s.a,{in:B,timeout:"auto",unmountOnExit:!0},l.a.createElement(m.a,{margin:1},l.a.createElement(Y,{items:u,onDelete:e.onDelete,onItemDelete:e.onItemDelete})))))};function T(){return"video"===E?l.a.createElement(I.a,null):l.a.createElement(P.a,null)}function G(){return r>0&&r<3?l.a.createElement(w.a,null):0===r?l.a.createElement(O.a,null):3===r?l.a.createElement(k.a,null):l.a.createElement(S.a,null)}function J(){return"video"===E?l.a.createElement(f.a,null):l.a.createElement(f.a,{style:{width:"30px"}},l.a.createElement(d.a,{"aria-label":"expand row",size:"small",onClick:function(){return F(!B)}},B?l.a.createElement(y.a,null):l.a.createElement(h.a,null)))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{className:A.root},l.a.createElement(J,null),l.a.createElement(f.a,{style:{width:"30px"}},l.a.createElement(G,null)),l.a.createElement(f.a,{style:{width:"30px"}},l.a.createElement(T,null)),l.a.createElement(f.a,{component:"th",scope:"row"},l.a.createElement(N,null)," ",l.a.createElement(z,null)),l.a.createElement(f.a,{align:"right"},l.a.createElement(d.a,{onClick:function(e){return D(!0)},color:"secondary"},l.a.createElement(p.a,null)))),l.a.createElement(R,null),l.a.createElement(Q,{open:j,request:e.request,onDelete:e.onDelete,onCancel:function(){return D(!1)}}))}var K=a(177),V=a(135),X=a(178);function $(e){return l.a.createElement(K.a,{component:V.a},l.a.createElement(M.a,{"aria-label":"collapsible table"},l.a.createElement(X.a,null,l.a.createElement(b.a,null,l.a.createElement(f.a,{colSpan:5},"Download Queue"))),l.a.createElement(U.a,null,e.requests.map((function(t){return l.a.createElement(H,{key:t.id,request:t,onDelete:function(t){return e.onDelete(t)},onItemDelete:function(t){return e.onItemDelete(t)}})})))))}var ee=a(179),te=a(180),ae=a(94),ne=a(190),le=a(68),re=a(43),ce=a.n(re),oe=a(92),ue=a.n(oe),ie=a(67),me=a.n(ie),se=Object(Z.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:2},title:{flexGrow:1},toolBar:{borderBottom:"solid 1px"}}}));function de(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),r=a[0],c=a[1],u=se();return l.a.createElement(l.a.Fragment,null,l.a.createElement(ee.a,{position:"static"},l.a.createElement(te.a,null,l.a.createElement(d.a,{className:u.menuButton,edge:"start",color:"inherit","aria-label":"menu",onClick:function(e){c(e.currentTarget)}},l.a.createElement(ue.a,null)),l.a.createElement(ae.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(e){console.log(e.target.value),c(null)}},l.a.createElement(ne.a,{onClick:function(t){e.onAdd(),c(null)}},l.a.createElement(ce.a,null),"\xa0\xa0Add"),l.a.createElement(ne.a,{onClick:function(){e.onClear(),c(null)}},l.a.createElement(me.a,null),"\xa0\xa0Clear Completed")),l.a.createElement(le.a,{className:u.title,variant:"h6"}," Download Daemon "))),l.a.createElement(te.a,{className:u.toolBar},l.a.createElement(d.a,{onClick:e.onAdd,color:"inherit",edge:"start"},l.a.createElement(ce.a,null)),l.a.createElement(d.a,{onClick:e.onClear},l.a.createElement(me.a,null))))}var Ee=a(181),pe=a(183),fe=a(20);function be(){return l.a.createElement(Ee.a,null)}var ge=a(185),he=a(182),ve=a(188);function ye(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],u=Object(n.useState)(0),i=Object(o.a)(u,2),m=i[0],s=i[1],d=Object(n.useState)(!0),E=Object(o.a)(d,2),p=E[0],f=E[1],b=Object(n.useState)(""),g=Object(o.a)(b,2),h=g[0],v=g[1],y=Object(n.useState)(!1),C=Object(o.a)(y,2),O=C[0],j=C[1],w=function(e){var t=null!==e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);return v(t?"":"invalid URL"),f(t),j(!0),t};return l.a.createElement(A.a,{open:e.open,"aria-labelledby":"form-dialog-title"},l.a.createElement(N.a,{id:"form-dialog-title"},"New Download Request"),l.a.createElement(z.a,null,l.a.createElement(ge.a,{autoFocus:!0,margin:"dense",id:"url",label:"URL",type:"url",name:"url",fullWidth:!0,value:r,error:!p,helperText:h,onChange:function(e){return c(e.target.value)},onBlur:function(e){O&&w(r)}}),l.a.createElement(he.a,{label:"Download during off peak hours",control:l.a.createElement(ve.a,{id:"schedule",name:"schedule",checked:!m,onChange:function(e){return s(!e.target.checked)}})})),l.a.createElement(T.a,null,l.a.createElement(G.a,{onClick:function(t){w(r)&&e.onSubmit({url:r,schedule:m})},variant:"contained",color:"primary",autoFocus:!0}," Submit "),l.a.createElement(G.a,{onClick:function(){return e.onCancel()},variant:"contained",color:"secondary"}," Cancel ")))}var Ce=Object(Z.a)((function(e){return{fab:{position:"absolute",bottom:e.spacing(5),right:e.spacing(5)}}}));function Oe(){var e=window.location.protocol+"//"+window.location.host.replace("3000","5000"),t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],c=a[1],u=Object(n.useState)(!1),m=Object(o.a)(u,2),s=m[0],d=m[1],E=Object(n.useState)(!1),p=Object(o.a)(E,2),f=p[0],b=p[1],g=Ce(),h=(Object(fe.a)(),function(){i.a.get(e+"/api/requests").then((function(e){var t=e.data;t.map((function(e){return e.avgPrg=function(e){var t=0;return e.items.forEach((function(e){return t+=e.progress})),null==e.items||0===e.items.length?0:t/e.items.length}(e),e})),c(t)}))});return Object(n.useEffect)((function(){h();var e=setInterval(h,5e3);return function(){return clearInterval(e)}}),[]),Object(n.useEffect)((function(){h()}),[s]),l.a.createElement(l.a.Fragment,null,l.a.createElement(de,{onAdd:function(){return b(!0)},onClear:function(){return console.log("clear completed requested"),void i.a.delete(e+"/api/requests").then((function(e){d(!0)}))}}),l.a.createElement(Ee.a,{style:{marginTop:"15px",position:"relative",height:"100%"}},l.a.createElement($,{requests:r,onDelete:function(t){return function(t){console.log("delete requested",t),i.a.delete(e+"/api/requests/"+t).then((function(e){d(!0)}))}(t)},onItemDelete:function(t){return function(t){console.log("delete item requested",t),i.a.delete(e+"/api/items/"+t).then((function(e){d(!0)}))}(t)}}),l.a.createElement(pe.a,{size:"medium",className:g.fab,color:"primary","aria-label":"add",onClick:function(){return b(!0)}},l.a.createElement(ce.a,null))),l.a.createElement(be,null),l.a.createElement(ye,{open:f,onCancel:function(){return b(!1)},onSubmit:function(t){return function(t){i.a.post(e+"/api/requests",t).then((function(e){console.log("submitted"),b(!1),d(!0)}))}(t)}}))}var je=a(184),we=a(93),De=Object(we.a)({palette:{},status:{danger:"orange"}});c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(je.a,{theme:De},l.a.createElement(Oe,null))),document.getElementById("root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.bb223d7e.chunk.js.map